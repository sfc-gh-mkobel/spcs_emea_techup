# spcs_emea_techup
## Account setup

```sql
use role accountadmin;

CREATE OR REPLACE ROLE TECHUP_DEMO_ROLE;
GRANT ROLE TECHUP_DEMO_ROLE TO ROLE ACCOUNTADMIN ;

GRANT CREATE DATABASE ON ACCOUNT TO ROLE TECHUP_DEMO_ROLE;
GRANT CREATE COMPUTE POOL ON ACCOUNT TO ROLE TECHUP_DEMO_ROLE;
GRANT CREATE WAREHOUSE ON ACCOUNT TO ROLE TECHUP_DEMO_ROLE;
GRANT CREATE INTEGRATION ON ACCOUNT TO ROLE TECHUP_DEMO_ROLE;

GRANT BIND SERVICE ENDPOINT ON ACCOUNT TO ROLE TECHUP_DEMO_ROLE;

USE ROLE TECHUP_DEMO_ROLE; 

CREATE WAREHOUSE IF NOT EXISTS TECHUP_DEMO_WH WAREHOUSE_SIZE = XSMALL AUTO_SUSPEND = 120 AUTO_RESUME = TRUE;

CREATE SECURITY INTEGRATION IF NOT EXISTS tutorial_integration
  TYPE=oauth
  OAUTH_CLIENT=snowservices_ingress
  ENABLED=true;

--GRANT USAGE ON INTEGRATION SNOWSERVICES_INGRESS_OAUTH TO ROLE TECHUP_DEMO_ROLE;


CREATE COMPUTE POOL TECHUP_DEMO_COMPUTE_POOL
  MIN_NODES = 1
  MAX_NODES = 1
  INSTANCE_FAMILY = CPU_X64_L
  AUTO_RESUME = TRUE
  INITIALLY_SUSPENDED = TRUE
  AUTO_SUSPEND_SECS = 1800; -- 30 Min Default: 3600 seconds;

--GRANT USAGE, MONITOR ON COMPUTE POOL TECHUP_DEMO_COMPUTE_POOL TO ROLE TECHUP_DEMO_ROLE;


USE ROLE TECHUP_DEMO_ROLE;


--CREATE WAREHOUSE IF NOT EXISTS TECHUP_DEMO_WH_XL WAREHOUSE_SIZE = XLARGE AUTO_SUSPEND = 120 AUTO_RESUME = TRUE;

CREATE DATABASE TECHUP_DEMO_DB;
GRANT OWNERSHIP ON DATABASE TECHUP_DEMO_DB TO ROLE TECHUP_DEMO_ROLE;
CREATE SCHEMA DATA_SCHEMA;

USE DATABASE TECHUP_DEMO_DB;
USE schema DATA_SCHEMA;


CREATE or replace STAGE TECHUP_DEMO_STAGE DIRECTORY = ( ENABLE = true );

CREATE or replace STAGE TECHUP_DEMO_FILE_STAGE ENCRYPTION = (type = 'SNOWFLAKE_SSE');


CREATE IMAGE REPOSITORY TECHUP_DEMO_REPOSITORY;


select "repository_url" from table(result_scan(last_query_id()));




SHOW IMAGES IN IMAGE REPOSITORY TECHUP_DEMO_REPOSITORY;
list @TECHUP_DEMO_STAGE;


-- clean up
USE ROLE TECHUP_DEMO_ROLE;
DROP SERVICE TECHUP_DEMO_SERVICE FORCE;
DROP DATABASE TECHUP_DEMO_DB;
use role accountadmin;
DROP COMPUTE POOL TECHUP_DEMO_COMPUTE_POOL;
DROP ROLE TECHUP_DEMO_ROLE;
DROP WAREHOUSE TECHUP_DEMO_WH;
```
